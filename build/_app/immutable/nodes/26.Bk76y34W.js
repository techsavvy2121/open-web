import{s as Ve,E as He,F as Oe,a as $,d,f as c,i as S,g as _,n as fe,e as v,c as w,Q as bt,M as ft,k as q,o as X,z as De,B as xe,p as ut,j as Ke,G as dt,u as ce,t as we,b as $e,h as ke,C as Be,A as yt,I as ot,q as It,N as Et}from"../chunks/BDiUIGvQ.js";import{S as We,i as Ae,t as x,g as Ne,c as Se,a as V,b as U,d as L,m as K,e as j,f as Fe}from"../chunks/CMw2dQw9.js";import{F as Dt}from"../chunks/CU2r43ac.js";import{t as Q}from"../chunks/CCWCPRcv.js";import{g as xt}from"../chunks/S4kmFmNp.js";import{p as Ft}from"../chunks/Dd1KqlJs.js";import{c as Vt,s as Ct,u as Tt,q as Nt}from"../chunks/0WLtkgvg.js";import{u as St,a as zt,g as Mt}from"../chunks/D1OVFEfm.js";import{b as Bt,r as Wt,e as At,f as Pt,u as Ut,h as Lt,g as Kt}from"../chunks/Bsh6oMZS.js";import{o as jt,v as Ht}from"../chunks/CXA2wbo1.js";import{S as Ot}from"../chunks/B8jKL4d6.js";import{e as pt}from"../chunks/DgmbscGK.js";import{F as Rt}from"../chunks/DLXIUI1u.js";import{A as qt}from"../chunks/9VMSQI6r.js";import"../chunks/Ce19VtxD.js";import{M as nt}from"../chunks/ZvLWUyvX.js";import{b as Xt}from"../chunks/Db3fZeOE.js";import{f as Gt}from"../chunks/g5t9vw8M.js";import{D as Qt}from"../chunks/zugTERnS.js";import{T as at}from"../chunks/DZF3XBRY.js";import{F as Yt}from"../chunks/Db_YeCOh.js";import"../chunks/I1CDPYOB.js";import{M as Jt}from"../chunks/cyg7nPOp.js";import{R as mt,V as Zt}from"../chunks/BeQ8C9dr.js";import{X as el}from"../chunks/DMy3xy05.js";import{M as tl}from"../chunks/B3QIbQzD.js";import{C as ll}from"../chunks/79Rinja3.js";import{D as rl}from"../chunks/ZmSPb8V6.js";import{C as sl}from"../chunks/CI0DSAfu.js";import{A as nl,L as ol}from"../chunks/CYf3xcbt.js";function al(s){let e,t;return{c(){e=He("svg"),t=He("path"),this.h()},l(l){e=Oe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Oe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","m15 11.25-3-3m0 0-3 3m3-3v7.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),_(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:fe,o:fe,d(l){l&&d(e)}}}function il(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class cl extends We{constructor(e){super(),Ae(this,e,il,al,Ve,{className:0,strokeWidth:1})}}function _t(s,e,t){const l=s.slice();return l[6]=e[t],l}function gt(s){var a,i,f,g,k,h;let e,t,l,r;function o(){return s[4](s[6])}function n(){return s[5](s[6])}return t=new Rt({props:{className:"w-full",colorClassName:(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition",small:s[2],item:s[6],name:((a=s[6])==null?void 0:a.name)??((f=(i=s[6])==null?void 0:i.meta)==null?void 0:f.name),type:"file",size:((g=s[6])==null?void 0:g.size)??((h=(k=s[6])==null?void 0:k.meta)==null?void 0:h.size)??"",loading:s[6].status==="uploading",dismissible:!0}}),t.$on("click",o),t.$on("dismiss",n),{c(){e=v("div"),U(t.$$.fragment),l=q(),this.h()},l(b){e=w(b,"DIV",{class:!0});var F=$(e);L(t.$$.fragment,F),l=X(F),F.forEach(d),this.h()},h(){c(e,"class","mt-1 px-2")},m(b,F){S(b,e,F),K(t,e,null),_(e,l),r=!0},p(b,F){var T,M,O,C,N,y;s=b;const D={};F&3&&(D.colorClassName=(s[0]===s[6].id?" bg-gray-50 dark:bg-gray-850":"bg-transparent")+" hover:bg-gray-50 dark:hover:bg-gray-850 transition"),F&4&&(D.small=s[2]),F&2&&(D.item=s[6]),F&2&&(D.name=((T=s[6])==null?void 0:T.name)??((O=(M=s[6])==null?void 0:M.meta)==null?void 0:O.name)),F&2&&(D.size=((C=s[6])==null?void 0:C.size)??((y=(N=s[6])==null?void 0:N.meta)==null?void 0:y.size)??""),F&2&&(D.loading=s[6].status==="uploading"),t.$set(D)},i(b){r||(x(t.$$.fragment,b),r=!0)},o(b){V(t.$$.fragment,b),r=!1},d(b){b&&d(e),j(t)}}}function fl(s){let e,t,l=pt(s[1]),r=[];for(let n=0;n<l.length;n+=1)r[n]=gt(_t(s,l,n));const o=n=>V(r[n],1,1,()=>{r[n]=null});return{c(){e=v("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=w(n,"DIV",{class:!0});var a=$(e);for(let i=0;i<r.length;i+=1)r[i].l(a);a.forEach(d),this.h()},h(){c(e,"class","max-h-full flex flex-col w-full")},m(n,a){S(n,e,a);for(let i=0;i<r.length;i+=1)r[i]&&r[i].m(e,null);t=!0},p(n,[a]){if(a&15){l=pt(n[1]);let i;for(i=0;i<l.length;i+=1){const f=_t(n,l,i);r[i]?(r[i].p(f,a),x(r[i],1)):(r[i]=gt(f),r[i].c(),x(r[i],1),r[i].m(e,null))}for(Ne(),i=l.length;i<r.length;i+=1)o(i);Se()}},i(n){if(!t){for(let a=0;a<l.length;a+=1)x(r[a]);t=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)V(r[a]);t=!1},d(n){n&&d(e),bt(r,n)}}}function ul(s,e,t){const l=ft();let{selectedFileId:r=null}=e,{files:o=[]}=e,{small:n=!1}=e;const a=f=>{f.status!=="uploading"&&l("click",f.id)},i=f=>{f.status!=="uploading"&&l("delete",f.id)};return s.$$set=f=>{"selectedFileId"in f&&t(0,r=f.selectedFileId),"files"in f&&t(1,o=f.files),"small"in f&&t(2,n=f.small)},[r,o,n,l,a,i]}class dl extends We{constructor(e){super(),Ae(this,e,ul,fl,Ve,{selectedFileId:0,files:1,small:2})}}function ml(s){let e,t;return{c(){e=He("svg"),t=He("path"),this.h()},l(l){e=Oe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Oe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M3 4.5h14.25M3 9h9.75M3 13.5h5.25m5.25-.75L17.25 9m0 0L21 12.75M17.25 9v12"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),_(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:fe,o:fe,d(l){l&&d(e)}}}function hl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class pl extends We{constructor(e){super(),Ae(this,e,hl,ml,Ve,{className:0,strokeWidth:1})}}function _l(s){let e,t;return{c(){e=He("svg"),t=He("path"),this.h()},l(l){e=Oe(l,"svg",{xmlns:!0,fill:!0,viewBox:!0,"stroke-width":!0,stroke:!0,class:!0});var r=$(e);t=Oe(r,"path",{"stroke-linecap":!0,"stroke-linejoin":!0,d:!0}),$(t).forEach(d),r.forEach(d),this.h()},h(){c(t,"stroke-linecap","round"),c(t,"stroke-linejoin","round"),c(t,"d","M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"),c(e,"xmlns","http://www.w3.org/2000/svg"),c(e,"fill","none"),c(e,"viewBox","0 0 24 24"),c(e,"stroke-width",s[1]),c(e,"stroke","currentColor"),c(e,"class",s[0])},m(l,r){S(l,e,r),_(e,t)},p(l,[r]){r&2&&c(e,"stroke-width",l[1]),r&1&&c(e,"class",l[0])},i:fe,o:fe,d(l){l&&d(e)}}}function gl(s,e,t){let{className:l="size-4"}=e,{strokeWidth:r="1.5"}=e;return s.$$set=o=>{"className"in o&&t(0,l=o.className),"strokeWidth"in o&&t(1,r=o.strokeWidth)},[l,r]}class vl extends We{constructor(e){super(),Ae(this,e,gl,_l,Ve,{className:0,strokeWidth:1})}}function wl(s){let e,t='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill="currentColor" class="w-4 h-4"><path d="M8.75 3.75a.75.75 0 0 0-1.5 0v3.5h-3.5a.75.75 0 0 0 0 1.5h3.5v3.5a.75.75 0 0 0 1.5 0v-3.5h3.5a.75.75 0 0 0 0-1.5h-3.5v-3.5Z"></path></svg>',l,r;return{c(){e=v("button"),e.innerHTML=t,this.h()},l(o){e=w(o,"BUTTON",{class:!0,"data-svelte-h":!0}),dt(e)!=="svelte-144k6kh"&&(e.innerHTML=t),this.h()},h(){c(e,"class","p-1.5 rounded-xl hover:bg-gray-100 dark:bg-gray-850 dark:hover:bg-gray-800 transition font-medium text-sm flex items-center space-x-1")},m(o,n){S(o,e,n),l||(r=ce(e,"click",s[9]),l=!0)},p:fe,d(o){o&&d(e),l=!1,r()}}}function $l(s){let e,t;return e=new at({props:{content:s[2].t("Add Content"),$$slots:{default:[wl]},$$scope:{ctx:s}}}),{c(){U(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){K(e,l,r),t=!0},p(l,r){const o={};r&4&&(o.content=l[2].t("Add Content")),r&4098&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function kl(s){let e,t,l,r=s[2].t("Upload files")+"",o,n;return e=new cl({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=q(),l=v("div"),o=we(r),this.h()},l(a){L(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){K(e,a,i),S(a,t,i),S(a,l,i),_(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload files")+"")&&ke(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){V(e.$$.fragment,a),n=!1},d(a){a&&(d(t),d(l)),j(e,a)}}}function bl(s){let e,t,l,r=s[2].t("Upload directory")+"",o,n;return e=new Yt({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=q(),l=v("div"),o=we(r),this.h()},l(a){L(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){K(e,a,i),S(a,t,i),S(a,l,i),_(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Upload directory")+"")&&ke(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){V(e.$$.fragment,a),n=!1},d(a){a&&(d(t),d(l)),j(e,a)}}}function yl(s){let e,t,l,r=s[2].t("Sync directory")+"",o,n;return e=new vl({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=q(),l=v("div"),o=we(r),this.h()},l(a){L(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){K(e,a,i),S(a,t,i),S(a,l,i),_(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Sync directory")+"")&&ke(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){V(e.$$.fragment,a),n=!1},d(a){a&&(d(t),d(l)),j(e,a)}}}function Il(s){let e,t;return e=new nt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[yl]},$$scope:{ctx:s}}}),e.$on("click",s[7]),{c(){U(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){K(e,l,r),t=!0},p(l,r){const o={};r&4100&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function El(s){let e,t,l,r=s[2].t("Add text content")+"",o,n;return e=new pl({props:{strokeWidth:"2"}}),{c(){U(e.$$.fragment),t=q(),l=v("div"),o=we(r),this.h()},l(a){L(e.$$.fragment,a),t=X(a),l=w(a,"DIV",{class:!0});var i=$(l);o=$e(i,r),i.forEach(d),this.h()},h(){c(l,"class","flex items-center")},m(a,i){K(e,a,i),S(a,t,i),S(a,l,i),_(l,o),n=!0},p(a,i){(!n||i&4)&&r!==(r=a[2].t("Add text content")+"")&&ke(o,r)},i(a){n||(x(e.$$.fragment,a),n=!0)},o(a){V(e.$$.fragment,a),n=!1},d(a){a&&(d(t),d(l)),j(e,a)}}}function Dl(s){let e,t,l,r,o,n,a,i;return e=new nt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[kl]},$$scope:{ctx:s}}}),e.$on("click",s[5]),l=new nt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[bl]},$$scope:{ctx:s}}}),l.$on("click",s[6]),o=new at({props:{content:s[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files."),className:"w-full",$$slots:{default:[Il]},$$scope:{ctx:s}}}),a=new nt({props:{class:"flex  gap-2  items-center px-3 py-2 text-sm  cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800 rounded-md",$$slots:{default:[El]},$$scope:{ctx:s}}}),a.$on("click",s[8]),{c(){U(e.$$.fragment),t=q(),U(l.$$.fragment),r=q(),U(o.$$.fragment),n=q(),U(a.$$.fragment)},l(f){L(e.$$.fragment,f),t=X(f),L(l.$$.fragment,f),r=X(f),L(o.$$.fragment,f),n=X(f),L(a.$$.fragment,f)},m(f,g){K(e,f,g),S(f,t,g),K(l,f,g),S(f,r,g),K(o,f,g),S(f,n,g),K(a,f,g),i=!0},p(f,g){const k={};g&4100&&(k.$$scope={dirty:g,ctx:f}),e.$set(k);const h={};g&4100&&(h.$$scope={dirty:g,ctx:f}),l.$set(h);const b={};g&4&&(b.content=f[2].t("This option will delete all existing files in the collection and replace them with newly uploaded files.")),g&4100&&(b.$$scope={dirty:g,ctx:f}),o.$set(b);const F={};g&4100&&(F.$$scope={dirty:g,ctx:f}),a.$set(F)},i(f){i||(x(e.$$.fragment,f),x(l.$$.fragment,f),x(o.$$.fragment,f),x(a.$$.fragment,f),i=!0)},o(f){V(e.$$.fragment,f),V(l.$$.fragment,f),V(o.$$.fragment,f),V(a.$$.fragment,f),i=!1},d(f){f&&(d(t),d(r),d(n)),j(e,f),j(l,f),j(o,f),j(a,f)}}}function xl(s){let e,t,l;return t=new Xt({props:{class:"w-full max-w-44 rounded-xl p-1 z-50 bg-white dark:bg-gray-850 dark:text-white shadow-sm",sideOffset:4,side:"bottom",align:"end",transition:Gt,$$slots:{default:[Dl]},$$scope:{ctx:s}}}),{c(){e=v("div"),U(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{slot:!0});var o=$(e);L(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"slot","content")},m(r,o){S(r,e,o),K(t,e,null),l=!0},p(r,o){const n={};o&4100&&(n.$$scope={dirty:o,ctx:r}),t.$set(n)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t)}}}function Fl(s){let e,t,l;function r(n){s[10](n)}let o={align:"end",$$slots:{content:[xl],default:[$l]},$$scope:{ctx:s}};return s[1]!==void 0&&(o.show=s[1]),e=new Qt({props:o}),De.push(()=>Fe(e,"show",r)),e.$on("change",s[11]),{c(){U(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){K(e,n,a),l=!0},p(n,[a]){const i={};a&4102&&(i.$$scope={dirty:a,ctx:n}),!t&&a&2&&(t=!0,i.show=n[1],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Vl(s,e,t){let l;const r=ft(),o=ut("i18n");Ke(s,o,D=>t(2,l=D));let{onClose:n=()=>{}}=e,a=!1;const i=()=>{r("upload",{type:"files"})},f=()=>{r("upload",{type:"directory"})},g=()=>{r("sync",{type:"directory"})},k=()=>{r("upload",{type:"text"})},h=D=>{D.stopPropagation(),t(1,a=!0)};function b(D){a=D,t(1,a)}const F=D=>{D.detail===!1&&n()};return s.$$set=D=>{"onClose"in D&&t(0,n=D.onClose)},[n,a,l,r,o,i,f,g,k,h,b,F]}class Cl extends We{constructor(e){super(),Ae(this,e,Vl,Fl,Ve,{onClose:0})}}function Tl(s){let e,t;return e=new at({props:{content:s[4].t("Voice Input"),$$slots:{default:[Sl]},$$scope:{ctx:s}}}),{c(){U(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){K(e,l,r),t=!0},p(l,r){const o={};r&16&&(o.content=l[4].t("Voice Input")),r&65560&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Nl(s){let e,t,l,r;function o(a){s[12](a)}let n={className:"p-1",onCancel:s[10],onConfirm:s[11]};return s[3]!==void 0&&(n.recording=s[3]),t=new Zt({props:n}),De.push(()=>Fe(t,"recording",o)),{c(){e=v("div"),U(t.$$.fragment),this.h()},l(a){e=w(a,"DIV",{class:!0});var i=$(e);L(t.$$.fragment,i),i.forEach(d),this.h()},h(){c(e,"class","max-w-full w-full")},m(a,i){S(a,e,i),K(t,e,null),r=!0},p(a,i){const f={};i&8&&(f.onCancel=a[10]),i&12&&(f.onConfirm=a[11]),!l&&i&8&&(l=!0,f.recording=a[3],xe(()=>l=!1)),t.$set(f)},i(a){r||(x(t.$$.fragment,a),r=!0)},o(a){V(t.$$.fragment,a),r=!1},d(a){a&&d(e),j(t)}}}function Sl(s){let e,t,l,r,o;return t=new tl({props:{className:"size-5"}}),{c(){e=v("button"),U(t.$$.fragment),this.h()},l(n){e=w(n,"BUTTON",{class:!0,type:!0});var a=$(e);L(t.$$.fragment,a),a.forEach(d),this.h()},h(){c(e,"class","p-2 bg-gray-50 text-gray-700 dark:bg-gray-700 dark:text-white transition rounded-full"),c(e,"type","button")},m(n,a){S(n,e,a),K(t,e,null),l=!0,r||(o=ce(e,"click",s[13]),r=!0)},p:fe,i(n){l||(x(t.$$.fragment,n),l=!0)},o(n){V(t.$$.fragment,n),l=!1},d(n){n&&d(e),j(t),r=!1,o()}}}function zl(s){let e,t=s[4].t("Save")+"",l;return{c(){e=v("button"),l=we(t),this.h()},l(r){e=w(r,"BUTTON",{class:!0,type:!0});var o=$(e);l=$e(o,t),o.forEach(d),this.h()},h(){c(e,"class","px-3.5 py-2 bg-black text-white dark:bg-white dark:text-black transition rounded-full"),c(e,"type","submit")},m(r,o){S(r,e,o),_(e,l)},p(r,o){o&16&&t!==(t=r[4].t("Save")+"")&&ke(l,t)},d(r){r&&d(e)}}}function Ml(s){let e,t,l,r,o,n,a,i,f,g,k,h,b,F,D,T,M,O,C,N,y,W,R,m,p,P,G;l=new el({props:{className:"size-3.5"}});function H(z){s[9](z)}let te={placeholder:s[4].t("Write something..."),preserveBreaks:!0};s[2]!==void 0&&(te.value=s[2]),D=new mt({props:te}),De.push(()=>Fe(D,"value",H));const se=[Nl,Tl],Y=[];function de(z,J){return z[3]?0:1}return N=de(s),y=Y[N]=se[N](s),m=new at({props:{content:s[4].t("Save"),$$slots:{default:[zl]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("button"),U(l.$$.fragment),r=q(),o=v("div"),n=v("form"),a=v("div"),i=v("div"),f=v("div"),g=v("div"),k=v("input"),b=q(),F=v("div"),U(D.$$.fragment),M=q(),O=v("div"),C=v("div"),y.c(),W=q(),R=v("div"),U(m.$$.fragment),this.h()},l(z){e=w(z,"DIV",{class:!0});var J=$(e);t=w(J,"BUTTON",{class:!0,type:!0});var re=$(t);L(l.$$.fragment,re),re.forEach(d),J.forEach(d),r=X(z),o=w(z,"DIV",{class:!0});var he=$(o);n=w(he,"FORM",{class:!0});var ue=$(n);a=w(ue,"DIV",{class:!0});var pe=$(a);i=w(pe,"DIV",{class:!0});var ne=$(i);f=w(ne,"DIV",{class:!0});var ze=$(f);g=w(ze,"DIV",{class:!0});var oe=$(g);k=w(oe,"INPUT",{class:!0,type:!0,placeholder:!0}),oe.forEach(d),ze.forEach(d),b=X(ne),F=w(ne,"DIV",{class:!0});var ae=$(F);L(D.$$.fragment,ae),ae.forEach(d),ne.forEach(d),pe.forEach(d),M=X(ue),O=w(ue,"DIV",{class:!0});var ge=$(O);C=w(ge,"DIV",{class:!0});var ve=$(C);y.l(ve),ve.forEach(d),W=X(ge),R=w(ge,"DIV",{class:!0});var Me=$(R);L(m.$$.fragment,Me),Me.forEach(d),ge.forEach(d),ue.forEach(d),he.forEach(d),this.h()},h(){c(t,"class","self-center dark:text-white"),c(t,"type","button"),c(e,"class","absolute top-0 right-0 p-5"),c(k,"class","w-full text-3xl font-semibold bg-transparent outline-hidden svelte-1vx7r9s"),c(k,"type","text"),c(k,"placeholder",h=s[4].t("Title")),k.required=!0,c(g,"class","w-full"),c(f,"class","shrink-0 w-full flex justify-between items-center"),c(F,"class","flex-1 w-full h-full"),c(i,"class","max-w-3xl py-2 md:py-10 w-full flex flex-col gap-2"),c(a,"class","flex-1 w-full h-full flex justify-center overflow-auto px-5 py-4"),c(C,"class",""),c(R,"class","shrink-0"),c(O,"class","flex flex-row items-center justify-end text-sm font-medium shrink-0 mt-1 p-4 gap-1.5"),c(n,"class","flex flex-col w-full h-full"),c(o,"class","flex flex-col md:flex-row w-full h-full md:space-x-4 dark:text-gray-200")},m(z,J){S(z,e,J),_(e,t),K(l,t,null),S(z,r,J),S(z,o,J),_(o,n),_(n,a),_(a,i),_(i,f),_(f,g),_(g,k),Be(k,s[1]),_(i,b),_(i,F),K(D,F,null),_(n,M),_(n,O),_(O,C),Y[N].m(C,null),_(O,W),_(O,R),K(m,R,null),p=!0,P||(G=[ce(t,"click",s[7]),ce(k,"input",s[8]),ce(n,"submit",yt(s[14]))],P=!0)},p(z,J){(!p||J&16&&h!==(h=z[4].t("Title")))&&c(k,"placeholder",h),J&2&&k.value!==z[1]&&Be(k,z[1]);const re={};J&16&&(re.placeholder=z[4].t("Write something...")),!T&&J&4&&(T=!0,re.value=z[2],xe(()=>T=!1)),D.$set(re);let he=N;N=de(z),N===he?Y[N].p(z,J):(Ne(),V(Y[he],1,1,()=>{Y[he]=null}),Se(),y=Y[N],y?y.p(z,J):(y=Y[N]=se[N](z),y.c()),x(y,1),y.m(C,null));const ue={};J&16&&(ue.content=z[4].t("Save")),J&65552&&(ue.$$scope={dirty:J,ctx:z}),m.$set(ue)},i(z){p||(x(l.$$.fragment,z),x(D.$$.fragment,z),x(y),x(m.$$.fragment,z),p=!0)},o(z){V(l.$$.fragment,z),V(D.$$.fragment,z),V(y),V(m.$$.fragment,z),p=!1},d(z){z&&(d(e),d(r),d(o)),j(l),j(D),Y[N].d(),j(m),P=!1,ot(G)}}}function Bl(s){let e,t,l;function r(n){s[15](n)}let o={size:"full",containerClassName:"",className:"h-full bg-white dark:bg-gray-900",$$slots:{default:[Ml]},$$scope:{ctx:s}};return s[0]!==void 0&&(o.show=s[0]),e=new Jt({props:o}),De.push(()=>Fe(e,"show",r)),{c(){U(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){K(e,n,a),l=!0},p(n,[a]){const i={};a&65567&&(i.$$scope={dirty:a,ctx:n}),!t&&a&1&&(t=!0,i.show=n[0],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Wl(s,e,t){let l;const r=ut("i18n");Ke(s,r,C=>t(4,l=C));const o=ft();let{show:n=!1}=e,a="Untitled",i="",f=!1;const g=()=>{t(0,n=!1)};function k(){a=this.value,t(1,a)}function h(C){i=C,t(2,i)}const b=()=>{t(3,f=!1)},F=C=>{const{text:N,filename:y}=C;t(2,i=`${i}${N} `),t(3,f=!1)};function D(C){f=C,t(3,f)}const T=async()=>{try{let C=await navigator.mediaDevices.getUserMedia({audio:!0}).catch(function(N){return Q.error(l.t("Permission denied when accessing microphone: {{error}}",{error:N})),null});C&&(t(3,f=!0),C.getTracks().forEach(y=>y.stop())),C=null}catch{Q.error(l.t("Permission denied when accessing microphone"))}},M=()=>{if(a.trim()===""||i.trim()===""){Q.error(l.t("Please fill in all fields.")),t(1,a=a.trim()),t(2,i=i.trim());return}o("submit",{name:a,content:i}),t(0,n=!1),t(1,a=""),t(2,i="")};function O(C){n=C,t(0,n)}return s.$$set=C=>{"show"in C&&t(0,n=C.show)},[n,a,i,f,l,r,o,g,k,h,b,F,D,T,M,O]}class Al extends We{constructor(e){super(),Ae(this,e,Wl,Bl,Ve,{show:0})}}function vt(s){let e,t,l,r,o,n,a;return o=new qt({props:{$$slots:{default:[Pl]},$$scope:{ctx:s}}}),{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),U(o.$$.fragment),this.h()},l(i){e=w(i,"DIV",{class:!0,id:!0,role:!0,"aria-label":!0});var f=$(e);t=w(f,"DIV",{class:!0});var g=$(t);l=w(g,"DIV",{class:!0});var k=$(l);r=w(k,"DIV",{class:!0});var h=$(r);L(o.$$.fragment,h),h.forEach(d),k.forEach(d),g.forEach(d),f.forEach(d),this.h()},h(){c(r,"class","max-w-md"),c(l,"class","m-auto pt-64 flex flex-col justify-center"),c(t,"class","absolute w-full h-full backdrop-blur-sm bg-gray-800/40 flex justify-center"),c(e,"class",n="fixed "+(s[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"),c(e,"id","dropzone"),c(e,"role","region"),c(e,"aria-label","Drag and Drop Container")},m(i,f){S(i,e,f),_(e,t),_(t,l),_(l,r),K(o,r,null),a=!0},p(i,f){const g={};f[2]&256&&(g.$$scope={dirty:f,ctx:i}),o.$set(g),(!a||f[0]&16384&&n!==(n="fixed "+(i[14]?"left-0 md:left-[260px] md:w-[calc(100%-260px)]":"left-0")+" w-full h-full flex z-50 touch-none pointer-events-none"))&&c(e,"class",n)},i(i){a||(x(o.$$.fragment,i),a=!0)},o(i){V(o.$$.fragment,i),a=!1},d(i){i&&d(e),j(o)}}}function Pl(s){let e,t="Drop any files here to add to my documents";return{c(){e=v("div"),e.textContent=t,this.h()},l(l){e=w(l,"DIV",{class:!0,"data-svelte-h":!0}),dt(e)!=="svelte-19eg75t"&&(e.textContent=t),this.h()},h(){c(e,"class","mt-2 text-center text-sm dark:text-gray-200 w-full")},m(l,r){S(l,e,r)},p:fe,d(l){l&&d(e)}}}function Ul(s){let e,t;return e=new Ot({}),{c(){U(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){K(e,l,r),t=!0},p:fe,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function Ll(s){var Ze,et,tt,lt;let e,t,l,r,o,n,a,i,f,g,k,h,b,F,D,T,M=s[13].t("Access")+"",O,C,N,y,W,R,m,p,P,G,H,te,se,Y,de,z='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-4 h-4"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd"></path></svg>',J,re,he,ue,pe,ne,ze,oe,ae,ge,ve,Me,Xe;function it(I){s[34](I)}function ct(I){s[35](I)}let Re={allowPublic:((tt=(et=(Ze=s[15])==null?void 0:Ze.permissions)==null?void 0:et.sharing)==null?void 0:tt.public_knowledge)||((lt=s[15])==null?void 0:lt.role)==="admin",onChange:s[33],accessRoles:["read","write"]};s[7]!==void 0&&(Re.show=s[7]),s[0].access_control!==void 0&&(Re.accessControl=s[0].access_control),e=new nl({props:Re}),De.push(()=>Fe(e,"show",it)),De.push(()=>Fe(e,"accessControl",ct)),F=new ol({props:{strokeWidth:"2.5",className:"size-3.5"}});const Ge=[jl,Kl],be=[];function Qe(I,Z){return I[3]?0:!I[3]&&I[2]!==null?1:-1}~(m=Qe(s))&&(p=be[m]=Ge[m](s)),ne=new Cl({}),ne.$on("upload",s[50]),ne.$on("sync",s[51]);const Ye=[Xl,ql],ye=[];function Je(I,Z){return I[9].length>0?0:1}return oe=Je(s),ae=ye[oe]=Ye[oe](s),{c(){U(e.$$.fragment),r=q(),o=v("div"),n=v("div"),a=v("div"),i=v("div"),f=v("div"),g=v("input"),k=q(),h=v("div"),b=v("button"),U(F.$$.fragment),D=q(),T=v("div"),O=we(M),C=q(),N=v("div"),y=v("input"),W=q(),R=v("div"),p&&p.c(),P=q(),G=v("div"),H=v("div"),te=v("div"),se=v("div"),Y=v("div"),de=v("div"),de.innerHTML=z,J=q(),re=v("input"),ue=q(),pe=v("div"),U(ne.$$.fragment),ze=q(),ae.c(),this.h()},l(I){L(e.$$.fragment,I),r=X(I),o=w(I,"DIV",{class:!0});var Z=$(o);n=w(Z,"DIV",{class:!0});var Ce=$(n);a=w(Ce,"DIV",{class:!0});var Ie=$(a);i=w(Ie,"DIV",{class:!0});var Ee=$(i);f=w(Ee,"DIV",{class:!0});var Pe=$(f);g=w(Pe,"INPUT",{type:!0,class:!0,placeholder:!0}),Pe.forEach(d),k=X(Ee),h=w(Ee,"DIV",{class:!0});var Ue=$(h);b=w(Ue,"BUTTON",{class:!0,type:!0});var Te=$(b);L(F.$$.fragment,Te),D=X(Te),T=w(Te,"DIV",{class:!0});var Le=$(T);O=$e(Le,M),Le.forEach(d),Te.forEach(d),Ue.forEach(d),Ee.forEach(d),C=X(Ie),N=w(Ie,"DIV",{class:!0});var rt=$(N);y=w(rt,"INPUT",{type:!0,class:!0,placeholder:!0}),rt.forEach(d),Ie.forEach(d),Ce.forEach(d),Z.forEach(d),W=X(I),R=w(I,"DIV",{class:!0});var je=$(R);p&&p.l(je),P=X(je),G=w(je,"DIV",{class:!0});var st=$(G);H=w(st,"DIV",{class:!0});var u=$(H);te=w(u,"DIV",{class:!0});var E=$(te);se=w(E,"DIV",{class:!0});var B=$(se);Y=w(B,"DIV",{class:!0});var A=$(Y);de=w(A,"DIV",{class:!0,"data-svelte-h":!0}),dt(de)!=="svelte-or7cnz"&&(de.innerHTML=z),J=X(A),re=w(A,"INPUT",{class:!0,placeholder:!0}),ue=X(A),pe=w(A,"DIV",{});var le=$(pe);L(ne.$$.fragment,le),le.forEach(d),A.forEach(d),B.forEach(d),ze=X(E),ae.l(E),E.forEach(d),u.forEach(d),st.forEach(d),je.forEach(d),this.h()},h(){c(g,"type","text"),c(g,"class","text-left w-full font-semibold text-2xl font-primary bg-transparent outline-hidden"),c(g,"placeholder","Knowledge Name"),c(f,"class","w-full"),c(T,"class","text-sm font-medium shrink-0"),c(b,"class","bg-gray-50 hover:bg-gray-100 text-black dark:bg-gray-850 dark:hover:bg-gray-800 dark:text-white transition px-2 py-1 rounded-full flex gap-1 items-center"),c(b,"type","button"),c(h,"class","self-center shrink-0"),c(i,"class","flex items-center justify-between w-full px-0.5 mb-1"),c(y,"type","text"),c(y,"class","text-left text-xs w-full text-gray-500 bg-transparent outline-hidden"),c(y,"placeholder","Knowledge Description"),c(N,"class","flex w-full px-1"),c(a,"class","flex-1"),c(n,"class","flex w-full"),c(o,"class","w-full mb-2.5"),c(de,"class","self-center ml-1 mr-3"),c(re,"class","w-full text-sm pr-4 py-1 rounded-r-xl outline-hidden bg-transparent"),c(re,"placeholder",he=s[13].t("Search Collection")),c(Y,"class","flex mb-0.5"),c(se,"class","px-3"),c(te,"class","w-full h-full flex flex-col"),c(H,"class","flex flex-col w-full space-x-2 rounded-lg h-full"),c(G,"class",ge=(s[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"),c(R,"class","flex flex-row flex-1 h-full max-h-full pb-2.5 gap-3")},m(I,Z){K(e,I,Z),S(I,r,Z),S(I,o,Z),_(o,n),_(n,a),_(a,i),_(i,f),_(f,g),Be(g,s[0].name),_(i,k),_(i,h),_(h,b),K(F,b,null),_(b,D),_(b,T),_(T,O),_(a,C),_(a,N),_(N,y),Be(y,s[0].description),S(I,W,Z),S(I,R,Z),~m&&be[m].m(R,null),_(R,P),_(R,G),_(G,H),_(H,te),_(te,se),_(se,Y),_(Y,de),_(Y,J),_(Y,re),Be(re,s[1]),_(Y,ue),_(Y,pe),K(ne,pe,null),_(te,ze),ye[oe].m(te,null),ve=!0,Me||(Xe=[ce(g,"input",s[36]),ce(g,"input",s[37]),ce(b,"click",s[38]),ce(y,"input",s[39]),ce(y,"input",s[40]),ce(re,"input",s[48]),ce(re,"focus",s[49])],Me=!0)},p(I,Z){var Pe,Ue,Te,Le;const Ce={};Z[0]&32768&&(Ce.allowPublic=((Te=(Ue=(Pe=I[15])==null?void 0:Pe.permissions)==null?void 0:Ue.sharing)==null?void 0:Te.public_knowledge)||((Le=I[15])==null?void 0:Le.role)==="admin"),!t&&Z[0]&128&&(t=!0,Ce.show=I[7],xe(()=>t=!1)),!l&&Z[0]&1&&(l=!0,Ce.accessControl=I[0].access_control,xe(()=>l=!1)),e.$set(Ce),Z[0]&1&&g.value!==I[0].name&&Be(g,I[0].name),(!ve||Z[0]&8192)&&M!==(M=I[13].t("Access")+"")&&ke(O,M),Z[0]&1&&y.value!==I[0].description&&Be(y,I[0].description);let Ie=m;m=Qe(I),m===Ie?~m&&be[m].p(I,Z):(p&&(Ne(),V(be[Ie],1,1,()=>{be[Ie]=null}),Se()),~m?(p=be[m],p?p.p(I,Z):(p=be[m]=Ge[m](I),p.c()),x(p,1),p.m(R,P)):p=null),(!ve||Z[0]&8192&&he!==(he=I[13].t("Search Collection")))&&c(re,"placeholder",he),Z[0]&2&&re.value!==I[1]&&Be(re,I[1]);let Ee=oe;oe=Je(I),oe===Ee?ye[oe].p(I,Z):(Ne(),V(ye[Ee],1,1,()=>{ye[Ee]=null}),Se(),ae=ye[oe],ae?ae.p(I,Z):(ae=ye[oe]=Ye[oe](I),ae.c()),x(ae,1),ae.m(te,null)),(!ve||Z[0]&8&&ge!==(ge=(I[3]?"shrink-0 w-72 max-w-72":"flex-1")+" flex py-2 rounded-2xl border border-gray-50 h-full dark:border-gray-850"))&&c(G,"class",ge)},i(I){ve||(x(e.$$.fragment,I),x(F.$$.fragment,I),x(p),x(ne.$$.fragment,I),x(ae),ve=!0)},o(I){V(e.$$.fragment,I),V(F.$$.fragment,I),V(p),V(ne.$$.fragment,I),V(ae),ve=!1},d(I){I&&(d(r),d(o),d(W),d(R)),j(e,I),j(F),~m&&be[m].d(),j(ne),ye[oe].d(),Me=!1,ot(Xe)}}}function Kl(s){let e,t;return e=new rl({props:{className:"h-full",show:s[2]!==null,onClose:s[47],$$slots:{default:[Hl]},$$scope:{ctx:s}}}),{c(){U(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){K(e,l,r),t=!0},p(l,r){const o={};r[0]&4&&(o.show=l[2]!==null),r[0]&4&&(o.onClose=l[47]),r[0]&11268|r[2]&256&&(o.$$scope={dirty:r,ctx:l}),e.$set(o)},i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}function jl(s){let e,t,l,r;const o=[Rl,Ol],n=[];function a(i,f){return i[10]?0:1}return t=a(s),l=n[t]=o[t](s),{c(){e=v("div"),l.c(),this.h()},l(i){e=w(i,"DIV",{class:!0});var f=$(e);l.l(f),f.forEach(d),this.h()},h(){c(e,"class","flex-1 flex justify-start w-full h-full max-h-full")},m(i,f){S(i,e,f),n[t].m(e,null),r=!0},p(i,f){let g=t;t=a(i),t===g?n[t].p(i,f):(Ne(),V(n[g],1,1,()=>{n[g]=null}),Se(),l=n[t],l?l.p(i,f):(l=n[t]=o[t](i),l.c()),x(l,1),l.m(e,null))},i(i){r||(x(l),r=!0)},o(i){V(l),r=!1},d(i){i&&d(e),n[t].d()}}}function wt(s){let e,t,l;function r(n){s[46](n)}let o={className:"input-prose-sm",placeholder:s[13].t("Add content here"),preserveBreaks:!1};return s[11]!==void 0&&(o.value=s[11]),e=new mt({props:o}),De.push(()=>Fe(e,"value",r)),{c(){U(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){K(e,n,a),l=!0},p(n,a){const i={};a[0]&8192&&(i.placeholder=n[13].t("Add content here")),!t&&a[0]&2048&&(t=!0,i.value=n[11],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function Hl(s){var R,m;let e,t,l,r,o,n,a,i,f=((m=(R=s[10])==null?void 0:R.meta)==null?void 0:m.name)+"",g,k,h,b,F=s[13].t("Save")+"",D,T,M,O=s[10].id,C,N,y;n=new sl({props:{strokeWidth:"2.5"}});let W=wt(s);return{c(){e=v("div"),t=v("div"),l=v("div"),r=v("div"),o=v("button"),U(n.$$.fragment),a=q(),i=v("div"),g=we(f),k=q(),h=v("div"),b=v("button"),D=we(F),T=q(),M=v("div"),W.c(),this.h()},l(p){e=w(p,"DIV",{class:!0});var P=$(e);t=w(P,"DIV",{class:!0});var G=$(t);l=w(G,"DIV",{class:!0});var H=$(l);r=w(H,"DIV",{class:!0});var te=$(r);o=w(te,"BUTTON",{class:!0});var se=$(o);L(n.$$.fragment,se),se.forEach(d),te.forEach(d),a=X(H),i=w(H,"DIV",{class:!0});var Y=$(i);g=$e(Y,f),Y.forEach(d),k=X(H),h=w(H,"DIV",{});var de=$(h);b=w(de,"BUTTON",{class:!0});var z=$(b);D=$e(z,F),z.forEach(d),de.forEach(d),H.forEach(d),T=X(G),M=w(G,"DIV",{class:!0});var J=$(M);W.l(J),J.forEach(d),G.forEach(d),P.forEach(d),this.h()},h(){c(o,"class","w-full text-left text-sm p-1.5 rounded-lg dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-gray-850"),c(r,"class","mr-2"),c(i,"class","flex-1 text-xl line-clamp-1"),c(b,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(l,"class","shrink-0 mt-1 mb-2 flex items-center"),c(M,"class","flex-1 w-full h-full max-h-full py-2.5 px-3.5 rounded-lg text-sm bg-transparent overflow-y-auto scrollbar-hidden"),c(t,"class","flex flex-col w-full h-full max-h-full"),c(e,"class","flex flex-col justify-start h-full max-h-full p-2")},m(p,P){S(p,e,P),_(e,t),_(t,l),_(l,r),_(r,o),K(n,o,null),_(l,a),_(l,i),_(i,g),_(l,k),_(l,h),_(h,b),_(b,D),_(t,T),_(t,M),W.m(M,null),C=!0,N||(y=[ce(o,"click",s[44]),ce(b,"click",s[45])],N=!0)},p(p,P){var G,H;(!C||P[0]&1024)&&f!==(f=((H=(G=p[10])==null?void 0:G.meta)==null?void 0:H.name)+"")&&ke(g,f),(!C||P[0]&8192)&&F!==(F=p[13].t("Save")+"")&&ke(D,F),P[0]&1024&&Ve(O,O=p[10].id)?(Ne(),V(W,1,1,fe),Se(),W=wt(p),W.c(),x(W,1),W.m(M,null)):W.p(p,P)},i(p){C||(x(n.$$.fragment,p),x(W),C=!0)},o(p){V(n.$$.fragment,p),V(W),C=!1},d(p){p&&d(e),j(n),W.d(p),N=!1,ot(y)}}}function Ol(s){let e,t,l=s[13].t("Drag and drop a file to upload or select a file to view")+"",r;return{c(){e=v("div"),t=v("div"),r=we(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{class:!0});var a=$(t);r=$e(a,l),a.forEach(d),n.forEach(d),this.h()},h(){c(t,"class","m-auto text-xs text-center text-gray-200 dark:text-gray-700"),c(e,"class","h-full flex w-full")},m(o,n){S(o,e,n),_(e,t),_(t,r)},p(o,n){n[0]&8192&&l!==(l=o[13].t("Drag and drop a file to upload or select a file to view")+"")&&ke(r,l)},i:fe,o:fe,d(o){o&&d(e)}}}function Rl(s){var W,R;let e,t,l,r,o,n=s[25]((R=(W=s[10])==null?void 0:W.meta)==null?void 0:R.name)+"",a,i,f,g,k,h=s[13].t("Save")+"",b,F,D,T=s[10].id,M,O,C,N=!Ql,y=$t(s);return{c(){e=v("div"),t=v("div"),l=q(),r=v("div"),o=v("a"),a=we(n),f=q(),g=v("div"),k=v("button"),b=we(h),F=q(),D=v("div"),y.c(),this.h()},l(m){e=w(m,"DIV",{class:!0});var p=$(e);t=w(p,"DIV",{class:!0});var P=$(t);l=X(P),r=w(P,"DIV",{class:!0});var G=$(r);o=w(G,"A",{class:!0,href:!0,target:!0});var H=$(o);a=$e(H,n),H.forEach(d),G.forEach(d),f=X(P),g=w(P,"DIV",{});var te=$(g);k=w(te,"BUTTON",{class:!0});var se=$(k);b=$e(se,h),se.forEach(d),te.forEach(d),P.forEach(d),F=X(p),D=w(p,"DIV",{class:!0});var Y=$(D);y.l(Y),Y.forEach(d),p.forEach(d),this.h()},h(){c(o,"class","hover:text-gray-500 dark:hover:text-gray-100 hover:underline grow line-clamp-1"),c(o,"href",i=s[10].id?`/api/v1/files/${s[10].id}/content`:"#"),c(o,"target","_blank"),c(r,"class","flex-1 text-xl font-medium"),c(k,"class","self-center w-fit text-sm py-1 px-2.5 dark:text-gray-300 dark:hover:text-white hover:bg-black/5 dark:hover:bg-white/5 rounded-lg"),c(t,"class","shrink-0 mb-2 flex items-center"),c(D,"class","flex-1 w-full h-full max-h-full text-sm bg-transparent outline-hidden overflow-y-auto scrollbar-hidden"),c(e,"class","flex flex-col w-full h-full max-h-full")},m(m,p){S(m,e,p),_(e,t),_(t,l),_(t,r),_(r,o),_(o,a),_(t,f),_(t,g),_(g,k),_(k,b),_(e,F),_(e,D),y.m(D,null),M=!0,O||(C=ce(k,"click",s[42]),O=!0)},p(m,p){var P,G;(!M||p[0]&1024)&&n!==(n=m[25]((G=(P=m[10])==null?void 0:P.meta)==null?void 0:G.name)+"")&&ke(a,n),(!M||p[0]&1024&&i!==(i=m[10].id?`/api/v1/files/${m[10].id}/content`:"#"))&&c(o,"href",i),(!M||p[0]&8192)&&h!==(h=m[13].t("Save")+"")&&ke(b,h),p[0]&1024&&Ve(T,T=m[10].id)?(Ne(),V(y,1,1,fe),Se(),y=$t(m),y.c(),x(y,1),y.m(D,null)):y.p(m,p)},i(m){M||(x(N),x(y),M=!0)},o(m){V(N),V(y),M=!1},d(m){m&&d(e),y.d(m),O=!1,C()}}}function $t(s){let e,t,l;function r(n){s[43](n)}let o={className:"input-prose-sm",placeholder:s[13].t("Add content here"),preserveBreaks:!1};return s[11]!==void 0&&(o.value=s[11]),e=new mt({props:o}),De.push(()=>Fe(e,"value",r)),{c(){U(e.$$.fragment)},l(n){L(e.$$.fragment,n)},m(n,a){K(e,n,a),l=!0},p(n,a){const i={};a[0]&8192&&(i.placeholder=n[13].t("Add content here")),!t&&a[0]&2048&&(t=!0,i.value=n[11],xe(()=>t=!1)),e.$set(i)},i(n){l||(x(e.$$.fragment,n),l=!0)},o(n){V(e.$$.fragment,n),l=!1},d(n){j(e,n)}}}function ql(s){let e,t,l=s[13].t("No content found")+"",r;return{c(){e=v("div"),t=v("div"),r=we(l),this.h()},l(o){e=w(o,"DIV",{class:!0});var n=$(e);t=w(n,"DIV",{});var a=$(t);r=$e(a,l),a.forEach(d),n.forEach(d),this.h()},h(){c(e,"class","my-3 flex flex-col justify-center text-center text-gray-500 text-xs")},m(o,n){S(o,e,n),_(e,t),_(t,r)},p(o,n){n[0]&8192&&l!==(l=o[13].t("No content found")+"")&&ke(r,l)},i:fe,o:fe,d(o){o&&d(e)}}}function Xl(s){let e,t,l;return t=new dl({props:{small:!0,files:s[9],selectedFileId:s[2]}}),t.$on("click",s[52]),t.$on("delete",s[53]),{c(){e=v("div"),U(t.$$.fragment),this.h()},l(r){e=w(r,"DIV",{class:!0});var o=$(e);L(t.$$.fragment,o),o.forEach(d),this.h()},h(){c(e,"class","flex overflow-y-auto h-full w-full scrollbar-hidden text-xs")},m(r,o){S(r,e,o),K(t,e,null),l=!0},p(r,o){const n={};o[0]&512&&(n.files=r[9]),o[0]&4&&(n.selectedFileId=r[2]),t.$set(n)},i(r){l||(x(t.$$.fragment,r),l=!0)},o(r){V(t.$$.fragment,r),l=!1},d(r){r&&d(e),j(t)}}}function Gl(s){let e,t,l,r,o,n,a,i,f,g,k,h,b,F,D,T=s[12]&&vt(s);function M(m){s[27](m)}let O={message:s[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")};s[6]!==void 0&&(O.show=s[6]),t=new ll({props:O}),De.push(()=>Fe(t,"show",M)),t.$on("confirm",s[28]);function C(m){s[29](m)}let N={};s[5]!==void 0&&(N.show=s[5]),o=new Al({props:N}),De.push(()=>Fe(o,"show",C)),o.$on("submit",s[30]);const y=[Ll,Ul],W=[];function R(m,p){return m[4]&&m[0]?0:1}return k=R(s),h=W[k]=y[k](s),{c(){T&&T.c(),e=q(),U(t.$$.fragment),r=q(),U(o.$$.fragment),a=q(),i=v("input"),f=q(),g=v("div"),h.c(),this.h()},l(m){T&&T.l(m),e=X(m),L(t.$$.fragment,m),r=X(m),L(o.$$.fragment,m),a=X(m),i=w(m,"INPUT",{id:!0,type:!0}),f=X(m),g=w(m,"DIV",{class:!0,id:!0});var p=$(g);h.l(p),p.forEach(d),this.h()},h(){c(i,"id","files-input"),c(i,"type","file"),i.multiple=!0,i.hidden=!0,c(g,"class","flex flex-col w-full translate-y-1"),c(g,"id","collection-container")},m(m,p){T&&T.m(m,p),S(m,e,p),K(t,m,p),S(m,r,p),K(o,m,p),S(m,a,p),S(m,i,p),S(m,f,p),S(m,g,p),W[k].m(g,null),b=!0,F||(D=[ce(i,"change",s[31]),ce(i,"change",s[32])],F=!0)},p(m,p){m[12]?T?(T.p(m,p),p[0]&4096&&x(T,1)):(T=vt(m),T.c(),x(T,1),T.m(e.parentNode,e)):T&&(Ne(),V(T,1,1,()=>{T=null}),Se());const P={};p[0]&8192&&(P.message=m[13].t("This will reset the knowledge base and sync all files. Do you wish to continue?")),!l&&p[0]&64&&(l=!0,P.show=m[6],xe(()=>l=!1)),t.$set(P);const G={};!n&&p[0]&32&&(n=!0,G.show=m[5],xe(()=>n=!1)),o.$set(G);let H=k;k=R(m),k===H?W[k].p(m,p):(Ne(),V(W[H],1,1,()=>{W[H]=null}),Se(),h=W[k],h?h.p(m,p):(h=W[k]=y[k](m),h.c()),x(h,1),h.m(g,null))},i(m){b||(x(T),x(t.$$.fragment,m),x(o.$$.fragment,m),x(h),b=!0)},o(m){V(T),V(t.$$.fragment,m),V(o.$$.fragment,m),V(h),b=!1},d(m){m&&(d(e),d(r),d(a),d(i),d(f),d(g)),T&&T.d(m),j(t,m),j(o,m),W[k].d(),F=!1,ot(D)}}}let Ql=!0;function Yl(s,e,t){let l,r,o,n,a;Ke(s,Ft,u=>t(57,l=u)),Ke(s,Vt,u=>t(58,o=u)),Ke(s,Ct,u=>t(14,n=u)),Ke(s,Tt,u=>t(15,a=u));const i=ut("i18n");Ke(s,i,u=>t(13,r=u));let f=!0,g,k=null,h=null,b="",F=!1,D=!1,T=!1,M=null,O=[],C=null,N=null,y="",W=new Map,R=null,m=null,p,P=!1;const G=(u,E)=>{const B=new Blob([E],{type:"text/plain"}),A=jt(B,`${u}.txt`);return console.log(A),A},H=async u=>{var A,le,me,_e;console.log(u);const E=Ht(),B={type:"file",file:"",id:null,url:"",name:u.name,size:u.size,status:"uploading",error:"",itemId:E};if(B.size==0)return Q.error(r.t("You cannot upload an empty file.")),null;if((((A=o==null?void 0:o.file)==null?void 0:A.max_size)??null)!==null&&u.size>(((le=o==null?void 0:o.file)==null?void 0:le.max_size)??0)*1024*1024){console.log("File exceeds max size limit:",{fileSize:u.size,maxSize:(((me=o==null?void 0:o.file)==null?void 0:me.max_size)??0)*1024*1024}),Q.error(r.t("File size should not exceed {{maxSize}} MB.",{maxSize:(_e=o==null?void 0:o.file)==null?void 0:_e.max_size}));return}t(0,h.files=[...h.files??[],B],h);try{const ee=await St(localStorage.token,u).catch(ie=>(Q.error(`${ie}`),null));ee?(console.log(ee),t(0,h.files=h.files.map(ie=>(ie.itemId===E&&(ie.id=ee.id),delete ie.itemId,ie)),h),await re(ee.id)):Q.error(r.t("Failed to upload file."))}catch(ee){Q.error(`${ee}`)}},te=async()=>{const u="showDirectoryPicker"in window;try{u?await Y():await de()}catch(E){z(E)}},se=u=>u.split("/").some(E=>E.startsWith(".")),Y=async()=>{const u=await window.showDirectoryPicker();let E=0,B=0;const A=()=>{const _e=B/E*100;Q.info(`Upload Progress: ${B}/${E} (${_e.toFixed(2)}%)`)};async function le(_e){for await(const ee of _e.values())ee.name.startsWith(".")||(ee.kind==="file"?E++:ee.kind==="directory"&&(ee.name.startsWith(".")||await le(ee)))}async function me(_e,ee=""){for await(const ie of _e.values()){if(ie.name.startsWith("."))continue;const qe=ee?`${ee}/${ie.name}`:ie.name;if(!se(qe))if(ie.kind==="file"){const ht=await ie.getFile(),kt=new File([ht],qe,{type:ht.type});await H(kt),B++,A()}else ie.kind==="directory"&&(ie.name.startsWith(".")||await me(ie,qe))}}await le(u),A(),E>0?await me(u):console.log("No files to upload.")},de=async()=>new Promise((u,E)=>{const B=document.createElement("input");B.type="file",B.webkitdirectory=!0,B.directory=!0,B.multiple=!0,B.style.display="none",document.body.appendChild(B),B.onchange=async()=>{try{const A=Array.from(B.files).filter(ee=>!se(ee.webkitRelativePath));let le=A.length,me=0;const _e=()=>{const ee=me/le*100;Q.info(`Upload Progress: ${me}/${le} (${ee.toFixed(2)}%)`)};_e();for(const ee of A)if(!ee.name.startsWith(".")){const ie=ee.webkitRelativePath||ee.name,qe=new File([ee],ie,{type:ee.type});await H(qe),me++,_e()}document.body.removeChild(B),u()}catch(A){E(A)}},B.onerror=A=>{document.body.removeChild(B),E(A)},B.click()}),z=u=>{u.name==="AbortError"?Q.info("Directory selection was cancelled"):(Q.error("Error accessing directory"),console.error("Directory access error:",u))},J=async()=>{if(((h==null?void 0:h.files)??[]).length>0){const u=await Wt(localStorage.token,k).catch(E=>{Q.error(`${E}`)});u&&(t(0,h=u),Q.success(r.t("Knowledge reset successfully.")),te())}else te()},re=async u=>{const E=await At(localStorage.token,k,u).catch(B=>(Q.error(`${B}`),null));E?(t(0,h=E),Q.success(r.t("File added successfully."))):(Q.error(r.t("Failed to add file.")),t(0,h.files=h.files.filter(B=>B.id!==u),h))},he=async u=>{try{console.log("Starting file deletion process for:",u);const E=await Pt(localStorage.token,k,u);console.log("Knowledge base updated:",E),E&&(t(0,h=E),Q.success(r.t("File removed successfully.")))}catch(E){console.error("Error in deleteFileHandler:",E),Q.error(`${E}`)}},ue=async()=>{const u=C.id,E=y;W.delete(u);const B=zt(localStorage.token,u,E).catch(le=>{Q.error(`${le}`)}),A=await Ut(localStorage.token,k,u).catch(le=>{Q.error(`${le}`)});B&&A&&(t(0,h=A),Q.success(r.t("File content updated successfully.")))},pe=()=>{console.log("debounce"),m&&clearTimeout(m),m=setTimeout(async()=>{if(h.name.trim()===""||h.description.trim()===""){Q.error(r.t("Please fill in all fields."));return}await Lt(localStorage.token,k,{...h,name:h.name,description:h.description,access_control:h.access_control}).catch(E=>{Q.error(`${E}`)})&&(Q.success(r.t("Knowledge updated successfully")),Nt.set(await Kt(localStorage.token)))},1e3)},ne=async u=>{u.matches?t(3,f=!0):t(3,f=!1)},ze=async u=>{try{if(t(10,C=u),W.has(u.id)){t(11,y=W.get(u.id));return}const E=await Mt(localStorage.token,u.id);E?(t(11,y=E.data.content),W.set(u.id,E.data.content)):Q.error(r.t("No content found in file."))}catch{Q.error(r.t("Failed to load file content."))}},oe=u=>{var E,B;u.preventDefault(),(B=(E=u.dataTransfer)==null?void 0:E.types)!=null&&B.includes("Files")?t(12,P=!0):t(12,P=!1)},ae=()=>{t(12,P=!1)},ge=async u=>{var E,B,A,le;if(u.preventDefault(),t(12,P=!1),(B=(E=u.dataTransfer)==null?void 0:E.types)!=null&&B.includes("Files")&&(A=u.dataTransfer)!=null&&A.files){const me=(le=u.dataTransfer)==null?void 0:le.files;if(me&&me.length>0)for(const _e of me)await H(_e);else Q.error(r.t("File not found."))}};It(async()=>{p=window.matchMedia("(min-width: 1024px)"),p.addEventListener("change",ne),ne(p);const u=document.getElementById("collection-container");f&&Math.floor(300/u.clientWidth*100),new ResizeObserver(le=>{for(let me of le)me.contentRect.width}).observe(u),t(4,k=l.params.id);const B=await Bt(localStorage.token,k).catch(le=>(Q.error(`${le}`),null));B?t(0,h=B):xt("/workspace/knowledge");const A=document.querySelector("body");A==null||A.addEventListener("dragover",oe),A==null||A.addEventListener("drop",ge),A==null||A.addEventListener("dragleave",ae)}),Et(()=>{p==null||p.removeEventListener("change",ne);const u=document.querySelector("body");u==null||u.removeEventListener("dragover",oe),u==null||u.removeEventListener("drop",ge),u==null||u.removeEventListener("dragleave",ae)});const ve=u=>{try{return decodeURIComponent(u)}catch{return u}};function Me(u){D=u,t(6,D)}const Xe=()=>{J()};function it(u){F=u,t(5,F)}const ct=u=>{const E=G(u.detail.name,u.detail.content);H(E)};function Re(){M=this.files,t(8,M)}const Ge=async()=>{if(M&&M.length>0){for(const E of M)await H(E);t(8,M=null);const u=document.getElementById("files-input");u&&(u.value="")}else Q.error(r.t("File not found."))},be=()=>{pe()};function Qe(u){T=u,t(7,T)}function Ye(u){s.$$.not_equal(h.access_control,u)&&(h.access_control=u,t(0,h))}function ye(){h.name=this.value,t(0,h)}const Je=()=>{pe()},Ze=()=>{t(7,T=!0)};function et(){h.description=this.value,t(0,h)}const tt=()=>{pe()},lt=()=>{g.expand()},I=()=>{ue()};function Z(u){y=u,t(11,y)}const Ce=()=>{t(2,N=null)},Ie=()=>{ue()};function Ee(u){y=u,t(11,y)}const Pe=()=>{t(2,N=null)};function Ue(){b=this.value,t(1,b)}const Te=()=>{t(2,N=null)},Le=u=>{u.detail.type==="directory"?te():u.detail.type==="text"?t(5,F=!0):document.getElementById("files-input").click()},rt=u=>{t(6,D=!0)},je=u=>{t(2,N=N===u.detail?null:u.detail)},st=u=>{console.log(u.detail),t(2,N=null),he(u.detail)};return s.$$.update=()=>{if(s.$$.dirty[0]&1&&h&&h.files&&t(26,R=new Dt(h.files,{keys:["meta.name","meta.description"]})),s.$$.dirty[0]&67108867&&R&&t(9,O=b?R.search(b).map(u=>u.item):(h==null?void 0:h.files)??[]),s.$$.dirty[0]&5)if(N){const u=((h==null?void 0:h.files)??[]).find(E=>E.id===N);u?ze(u):t(10,C=null)}else t(10,C=null)},[h,b,N,f,k,F,D,T,M,O,C,y,P,r,n,a,i,g,G,H,te,J,he,ue,pe,ve,R,Me,Xe,it,ct,Re,Ge,be,Qe,Ye,ye,Je,Ze,et,tt,lt,I,Z,Ce,Ie,Ee,Pe,Ue,Te,Le,rt,je,st]}class Jl extends We{constructor(e){super(),Ae(this,e,Yl,Gl,Ve,{},null,[-1,-1,-1])}}function Zl(s){let e,t;return e=new Jl({}),{c(){U(e.$$.fragment)},l(l){L(e.$$.fragment,l)},m(l,r){K(e,l,r),t=!0},p:fe,i(l){t||(x(e.$$.fragment,l),t=!0)},o(l){V(e.$$.fragment,l),t=!1},d(l){j(e,l)}}}class Cr extends We{constructor(e){super(),Ae(this,e,null,Zl,Ve,{})}}export{Cr as component};
//# sourceMappingURL=26.Bk76y34W.js.map
